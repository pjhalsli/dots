#!/bin/sh
#
# move windows with bspwm
#
# wm key bindings

percent=2

# also move floating windows
if bspc query -N -n focused.floating > /dev/null; then
    case "$1" in
        west) target=width; sign=-;;
        east) target=width; sign=+;;
        north) target=height; sign=-;;
        south) target=height; sign=+;;
    esac

    # get move value
    arg=$(bspc query -T -m | jq .rectangle.width)
    arg=$(echo "$arg * $percent / 100" | bc)

    [ "$target" = width ] && { x="${sign}${arg}"; y=0; }
    [ "$target" = height ] && { x=0; y="${sign}${arg}"; }

    bspc node -v "$x" "$y"
else
    bspc node -s "$1"
fi
