#!/usr/bin/env dash
#
# lemonbar script
#
# wm tool

# set values
a="%{F#FF99A1}"
n="%{F-}"

workspaces() {
    cur=$(bspc wm -g | grep -o '[OFU][1-5]' | tail -c2)
    case "$cur" in
        1) echo "${a}${n}";;
        2) echo "${a}${n}";;
        3) echo "${a}${n}";;
        4) echo "${a}${n}";;
        5) echo "${a}${n}";;
    esac
}

clock() {
    echo "${a}${n} $(date +'%a %R')"
}

network() {
    cur=$(iwgetid -r)
    [ -z "$cur" ] && cur=offline
    echo "${a}${n} ${cur}"
}

volume() {
    cur=$(amixer sget Master | grep -o -m1 '[0-9]*%')
    if [ "$cur" = "0%" ]; then
        icon=
    else
        icon=
    fi
    echo "${a}${icon}${n} ${cur}"
}

battery() {
    cur=$(cat /sys/class/power_supply/BAT0/capacity)
    if [ "$cur" -eq 100 ]; then
        icon=
    elif [ "$cur" -gt 75 ]; then
        icon=
    elif [ "$cur" -gt 25 ]; then
        icon=
    else
        icon=
    fi
    echo "${a}${icon}${n} ${cur}%"
}

# create bar
while echo "%{l}  $(workspaces)%{c}$(clock)%{r}$(network)  $(volume)  $(battery)  "
do sleep .2s
done |\
    lemonbar -g x30 \
        -f "-uw-ttyp0-medium-r-normal--11-100-75-75-c-60-iso8859-1" \
        -f "-wuncon-siji-medium-r-normal--10-100-75-75-c-80-iso10646-1" \
        -B \#021B21 \
        -F \#E8DFD6

# vim: ft=sh
