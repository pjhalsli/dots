#!/bin/sh
#
# lemonbar
#
# wm tool

a="%{F#FAFAFA}%{B#555555}"
b="%{F#555555}%{B#CCCCCC}"
t="%{B-}%{F-}"

ws() {
    cur=$(bspc wm -g | grep -o '[OFU][1-5]' | tail -c2)
    for i in $(seq 1 5); do
        if [ "$cur" -eq "$i" ]; then
            line="$line$a  $i  "
        else
            line="$line$b  $i  "
        fi
    done
    echo "$line$t"
}

ck() {
    date +'%A %R'
}

nt() {
    cur=$(iwgetid -r)
    echo "$b  ${cur:-Offline}  $t"
}

bt() {
    cur=$(cat /sys/class/power_supply/BAT0/capacity)
    echo "$a  $cur%  $t"
}

while echo "%{l}$(ws)%{c}$(ck)%{r}$(nt)$(bt)"
do sleep .2s
done |\
    lemonbar -g x30 \
    -f "-t-cherry-medium-r-normal--11-100-75-75-c-100-iso8859-1" \
    -B \#FAFAFA \
    -F \#555555
