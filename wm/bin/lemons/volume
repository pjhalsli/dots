# sourced by 'panel'

vol ()
{
    # ensure the block isn't empty
    { echo init; pactl subscribe; } | while read -r event; do
        case $event in
            init|*'sink #0')
                var=$(pactl list sinks)

                # pattern matching
                case $var in
                    *yes*) icon=;;
                    *)     icon=
                esac

                # we want word splitting
                set -- ${var#*Volume:}

                echo "V$a$icon$t $4"
        esac
    done
}

# vim: ft=sh
