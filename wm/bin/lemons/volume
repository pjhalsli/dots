# get volume
#
# lemonbar script

vol ()
{
    # ensure the block isn't empty on startup
    { echo init; pactl subscribe 2> /dev/null; } | \
        while read -r event; do
            case $event in
                init|*'sink #0')
                    var=$(pactl list sinks)

                    if echo "$var" | grep -q 'Mute: yes'; then
                        out="%{F$accent}%{F-} Muted"
                    else
                        # we want word splitting
                        set -- ${var#*Volume:}
                        out="%{F$accent}%{F-} $4"
                    fi
                    echo "V$out"
            esac
        done
}

# vim: ft=sh
