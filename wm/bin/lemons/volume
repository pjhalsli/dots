# get volume
#
# lemonbar script

vol ()
{
    # ensure the block isn't empty on startup
    { echo init; pactl subscribe 2> /dev/null; } | \
        while read -r event; do
            case $event in
                init|*'sink #0')
                    var=$(pactl list sinks)

                    case $var in
                        *'Mute: yes'*)
                            var="$a$t Muted"
                            ;;
                        *)
                            # we want word splitting
                            set -- ${var#*Volume:}
                            var="$a$t $4"
                    esac
                    echo "V$var"
            esac
        done
}

# vim: ft=sh
