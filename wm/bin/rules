#!/bin/sh
#
# external bspwm rules

# exit if there is no window
bspc query -N -n > /dev/null || exit

# spawn in preselections first, exit in that case
presel=$(bspc query -N -n newest.local.!automatic)
test "$presel" && { echo "node = $presel"; exit; }

# TODO : use automatic_scheme when available
wattr wh "$(pfw)" |
{
    read -r w h

    # split horizontally if w > h
    # split vertically otherwise
    [ "$w" -gt "$h" ] && split=east || split=south

    echo "split_dir = $split"
}
