#!/bin/sh
#
# external bspwm rules
#
# wm script

# exit if there is no window
bspc query -N -n > /dev/null || exit

# spawn in preselections first, exit in that case
presel=$(bspc query -N -n last.local.!automatic)
test "$presel" && { echo "node = $presel"; exit; }

bspc query -T -n | jq -r '
    [
         .rectangle.width
        ,.rectangle.height
    ] |
    @sh' |
    {
        read -r x y

        # split horizontally if x > y
        # split vertically otherwise
        [ "$x" -gt "$y" ] && split=east || split=south

        echo "split_dir = $split"
    }
