#!/bin/sh
#
# get volume
#
# lemonbar script

{
    # run on startup
    echo init
    pactl subscribe 2> /dev/null
} | \
    while read -r event; do
        case $event in
            init|*\#0)
                var=$(pactl list sinks)

                if echo "$var" | grep -q 'Muted: yes'; then
                    out="$(icon ) Muted"
                else
                    var=$(echo "$var" | grep -o '[0-9]*%' | head -1)
                    out="$(icon ) $var"
                fi
                echo "V$out"
        esac
    done
