# !/usr/bin/env bash
#
# draw terminals

bspc rule -a \* -o state=floating

# get values from slop
read -r w h x y < <(slop -qf '%w %h %x %y')

# take borders into account
: "$(bspc config border_width)"

((w -= 2 * _))
((h -= 2 * _))

urxvtc &

# wait for our window to spawn
# then move it and resize it
while read -r event mon desk ip node; do
    xdotool windowsize "$node" "$w" "$h"
    xdotool windowmove "$node" "$x" "$y"

    break
done < <(bspc subscribe node_add)
