#!/bin/sh
#
# draw terminals

bspc rule -a \* -o state=floating

slop -qf '%w %h %x %y' |
{
    read -r w h x y

    # take borders into account
    b=$(bspc config border_width)

    w=$((w - 2 * b))
    h=$((h - 2 * b))

    urxvtc &

    # wait for our window to spawn
    # then move it and resize it
    bspc subscribe node_add |
        while read -r event mon desk ip node; do
            xdotool windowsize "$node" "$w" "$h"
            xdotool windowmove "$node" "$x" "$y"

            break
        done
}
