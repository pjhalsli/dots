#!/bin/sh
#
# 2bspwm

# get values from bspwm config
s=$((`bspc config border_width` / 2))
n=$(bspc config normal_border_color);  n=0x${n#?}
f=$(bspc config focused_border_color); f=0x${f#?}

run ()
{
    case $1 in
        n) a=$f; b=$n;;
        f) a=$n; b=$f
    esac

    shift

    chwb2 -I "$a" -O "$b" -i "$s" -o "$s" "$@" 2> /dev/null
}

bspc subscribe node_geometry node_focus |
    while read -r var; do
        run n $(bspc query -N -n .descendant_of.window)
        run f $(bspc query -N -n .!descendant_of.window)
    done
