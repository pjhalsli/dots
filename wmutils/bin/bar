#!/bin/sh
#
# lemonbar script
#
# wmutils

a="%{B#FF99A1}"
b="%{B#032C36}"
t="%{B-}"

ws() {
    cur=$(cat /tmp/wmutils-ws/current)
    for i in $(seq 1 5); do
        if [ "$i" = "$cur" ]; then
            line="$line$a  $i  "
        else
            line="$line$b  $i  "
        fi
    done
    echo "$line$t"
}

ck() {
    date +'%A %R'
}

nt() {
    cur=$(iwgetid -r)
    [ -z "$cur" ] && cur=Offline
    echo "$b  $cur  $t"
}

bt() {
    cur=$(cat /sys/class/power_supply/BAT0/capacity)
    echo "$a  $cur%  $t"
}

while echo "%{l}$(ws)%{c}$(ck)%{r}$(nt)$(bt)"
do sleep .2s
done | \
    lemonbar -g "x$PANEL" \
    -f -*-cherry-* \
    -B \#021B21 \
    -F \#E8DFD6 \
    -d
