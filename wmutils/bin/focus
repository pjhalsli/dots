#!/bin/sh
#
# set focus
#
# wmutils

border() {
    case "$1" in
        a) chwb -c 0xEEEEEE -s 5 "$2";;
        t) chwb -c 0x032C36 -s 5 "$2";;
    esac
}

case "$1" in
    # stolen from wmutils contrib
    next) id=$(lsw | grep -v "$2" | sed '1 p;d');;
    prev) id=$(lsw | grep -v "$2" | sed '$ p;d');;
    *) id="$1";;
esac

[ -z "$id" ] && exit

# set borders
border a "$id"

for win in $(lsw | grep -v "$id"); do
    border t "$win" &
done

# set focus
wtf "$id"

# set stacking order
chwso -r "$id"

# teleport cursor
x=$(wattr x "$id")
y=$(wattr y "$id")
w=$(wattr w "$id")
h=$(wattr h "$id")

wmp -a "$((x + w / 2))" "$((y + h / 2))"
