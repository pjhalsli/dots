#!/usr/bin/env bash
#
# rename pictures based on exifs

exif() {
    date=$(identify -format "%[EXIF:DateTime]" "$1")

    # exit if imagemagick failed
    [[ ! $date ]] && exit 1

    date=${date// /_}
    date=${date//:/-}

    ext=${1##*.}

    mv "$1" "$date.$ext"
}

while [[ $# -gt 0 ]]; do
    exif "$1"
    shift
done
